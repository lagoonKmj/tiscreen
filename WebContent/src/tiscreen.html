<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>lagoon's dashboard</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link rel="stylesheet" href="../resources/css/gridstack.css"/>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.0/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.5.0/lodash.min.js"></script>
<script src="../resources/js/gridstack.js"></script>
<script src="../resources/js/gridstack.jQueryUI.js"></script>

<!-- <script type="text/javascript" src="http://static.fusioncharts.com/code/latest/fusioncharts.js"></script> -->
<!-- <script type="text/javascript" src="http://static.fusioncharts.com/code/latest/themes/fusioncharts.theme.fint.js?cacheBust=56"></script> -->
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<style type="text/css">
  .grid-stack {
    background: lightgoldenrodyellow;
  }

  .grid-stack-item-content {
    color: #2c3e50;
    text-align: center;
    background-color: #18bc9c;
  }
</style>
    
<script type="text/javascript">
$(function () {
  
  var options = {
      float: false
  };
  
  $(".grid-stack").gridstack(options);
  $("#add-new-widget").on("click", function() {
    addComponent();
  });
  $("#add-new-widget-many").on("click", function() {
    for (var iCnt = 0; iCnt < 20; iCnt++) {
      addComponent();
    }
  });
  $("#remove-all-widget").on("click", function() {
    this.grid.removeAll();
  });
  
  var numComponent = 0;
  var addComponent = function() {
    this.grid = $('.grid-stack').data('gridstack');
    var node = { x: 0, y: 0, width: 3, height: 3 };
    var divId = "container_" + numComponent;
    this.grid.addWidget($("<div><div class='grid-stack-item-content' id=" + divId + " style='height: 100%; max-width: 100%; margin: 0 auto'/><div/>"), node.x, node.y, node.width, node.height);
    drawChart(divId);
    numComponent++;
  }
  
  var drawChart = function(divId) {
    Highcharts.chart(divId, {
      chart: {
          plotBackgroundColor: null,
          plotBorderWidth: 0,
          plotShadow: false
      },
      title: {
          text: 'Browser<br>shares<br>2015',
          align: 'center',
          verticalAlign: 'middle',
          y: 40
      },
      tooltip: {
          pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
      },
      plotOptions: {
          pie: {
              dataLabels: {
                  enabled: true,
                  distance: -50,
                  style: {
                      fontWeight: 'bold',
                      color: 'white'
                  }
              },
              startAngle: -90,
              endAngle: 90,
              center: ['50%', '75%']
          }
      },
      series: [{
          type: 'pie',
          name: 'Browser share',
          innerSize: '50%',
          data: [
              ['Firefox',   10.38],
              ['IE',       56.33],
              ['Chrome', 24.03],
              ['Safari',    4.77],
              ['Opera',     0.91],
              {
                  name: 'Proprietary or Undetectable',
                  y: 0.2,
                  dataLabels: {
                      enabled: false
                  }
              }
          ]
      }]
    });
  };
  
});
</script>
    
</head>
<body>
  <div class="container-fluid">
    <h1>lagoon's dashboard</h1>
    <div>
      <a class="btn btn-default" id="add-new-widget" href="#">Add Widget</a>
      <a class="btn btn-default" id="add-new-widget-many" href="#">Add Widget Many</a>
      <a class="btn btn-default" id="remove-all-widget" href="#">Remove All</a>
    </div>
     <br/>
    <div class="grid-stack">
    </div>
  </div>
</body>
</html>